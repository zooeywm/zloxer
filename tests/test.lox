fun stressTest(name, limit) {
  print "=== stressTest begin ===";
  print "name: " + name;
  print "limit: " + limit;

  // 外层局部状态
  var counter = 0;
  var sum = 0;
  var last = nil;

  {
    // 第一层作用域遮蔽
    var counter = 100;
    print "shadowed counter (outer block): " + counter;

    {
      // 第二层作用域遮蔽
      var counter = 200;
      print "shadowed counter (inner block): " + counter;
    }

    print "counter after inner block: " + counter;
  }

  print "counter after blocks: " + counter;

  // while + if + break
  while (counter < limit) {
    sum = sum + counter;

    if (counter > limit / 2) {
      print "halfway reached at: " + counter;
    }

    last = counter;
    counter = counter + 1;

    if (counter > limit + 2) {
      break;
    }
  }

  print "loop finished";
  print "sum: " + sum;
  print "last value: " + last;

  // 嵌套 for + 内部变量
  var outer = 0;
  for (var i = 0; i < 3; i = i + 1) {
    print "for i = " + i;

    var inner = 0;
    while (inner < 2) {
      print "  inner = " + inner;
      outer = outer + 1;
      inner = inner + 1;
    }
  }

  print "outer count: " + outer;

  // if / else 链
  if (sum > 50) {
    print "sum is large";
  } else {
    print "sum is small";
  }

  print "=== stressTest end ===";
}

stressTest("TestRun", 8);
